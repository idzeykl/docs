---
title: 'Динамическая типизация'
description: 'Динамическая типизация и преобразование типов в IdzeyKL (строго по INSTRUCTIONS.md)'
---

# Динамическая типизация

IdzeyKL использует динамическую типизацию, что означает, что тип переменной определяется во время выполнения и может изменяться.

## Автоматическое преобразование типов

Язык автоматически преобразует типы при необходимости:

1. **Числовые преобразования**:
   - Строки, содержащие числа, автоматически преобразуются в числа при арифметических операциях (кроме `+`)
   - Логические значения преобразуются в числа: `true` → `1`, `false` → `0`
   - `null` преобразуется в `0`
2. **Строковые преобразования**:
   - При конкатенации с помощью оператора `+` любые значения преобразуются в строки
   - Числа преобразуются в их строковое представление
   - Логические значения преобразуются в строки "true" или "false"
   - `null` преобразуется в строку "null"
3. **Логические преобразования**:
   - В логическом контексте (условия в `if`, `while`, `for`) значения преобразуются в логические
   - Числа: `0` → `false`, любое ненулевое число → `true`
   - Строки: пустая строка `""` → `false`, непустая строка → `true`
   - Массивы: пустой массив `{}` → `false`, непустой массив → `true`
   - `null` → `false`

## Автоматический выбор типа для чисел

Язык автоматически выбирает наиболее подходящий тип для чисел:

1. **Целые числа (INTEGER)**:
   - Используются, когда значение можно точно представить как целое число
   - Пример: `10 / 2` → `5` (целое число)
2. **Числа с плавающей точкой (NUMBER)**:
   - Используются, когда значение требует дробной части
   - Пример: `10 / 3` → `3.333...` (число с плавающей точкой)

## Примеры

```
var a = 10;
var b = "20";
var c = a + b;  // Строковая конкатенация: "1020"
println("a + b = " + c);

var d = a * b;  // Числовое умножение: 200
println("a * b = " + d);

var e = 10 / 2; // Целочисленное деление: 5
println("10 / 2 = " + e);

var f = 10 / 3; // Деление с плавающей точкой: 3.333...
println("10 / 3 = " + f);
```

## Проверка типа

### Оператор typeof

Оператор `typeof` возвращает тип значения в виде строки:

```ikl
var num = 42;
var str = "hello";
var bool = true;
var arr = {1, 2, 3};
var n = null;

println(typeof(num));  // "number"
println(typeof(str));  // "string"
println(typeof(bool)); // "boolean"
println(typeof(arr));  // "array"
println(typeof(n));    // "null"
```

## Рекомендации

1. **Будьте явны при преобразовании типов**:
   ```ikl
   // Хорошо
   var num = value * 1;
   // Лучше
   func toNumber(value) {
       if (typeof(value) == "number") return value;
       if (typeof(value) == "string") return value * 1;
       return 0;
   }
   ```
2. **Проверяйте тип перед операциями**:
   ```ikl
   if (typeof(value) == "number") {
       result = value * 2;
   }
   ```
3. **Документируйте ожидаемые типы**:
   ```ikl
   // Параметры:
   //   value: number|string - значение для преобразования
   // Возвращает: number
   func convertToNumber(value) {
       return value * 1;
   }
   ```

## Типичные ошибки

1. **Конкатенация строк с числами**:
   ```ikl
   var result = "2" + 2; // "22"
   var result = ("2" * 1) + 2; // 4
   ```
2. **Преобразование к логическому типу**:
   ```ikl
   if ("0") { /* выполнится */ }
   if (parseInt("0")) { /* не выполнится */ }
   ```
3. **Работа с null**:
   ```ikl
   var result = null + 5; // 5
   ```

## Дальнейшие шаги

Теперь вы знаете, как работает динамическая типизация. Перейдите к разделу [Встроенные функции](/idzeykl/built-in-functions), чтобы узнать о стандартных возможностях языка. 